{% extends "base.html" %}
{# Copyright The IETF Trust 2015, 2017. All Rights Reserved. #}
{% load origin %}
{% load ietf_filters ipr_filters %}
{% block title %}IPR Details - {{ ipr.title }}{% endblock %}
{% block pagehead %}
    <meta name="description" content="IPR disclosure #{{ipr.ipr_id}}: {{ ipr.title }} ({{ ipr.time|date:'Y' }})">
{% endblock %}
{% block content %}
    {% origin %}
    <h1>
        IPR Details
        <br>
        <small class="text-muted">{{ ipr.title }}</small>
    </h1>
    {% include "ipr/details_tabs.html" %}
    <div class="buttonlist my-3">
        {% if ipr.state_id == 'posted' %}
            <a class="btn btn-primary"
               href="{% url "ietf.ipr.views.update" ipr.id %}"
               rel="nofollow">
                Update this IPR disclosure
            </a>
        {% endif %}
        {% if user|has_role:"Secretariat" %}
            {# admin actions #}
            {% if ipr.updates and ipr.state_id == 'pending' and not ipr.update_notified_date %}
                <a class="btn btn-primary"
                   href="{% url 'ietf.ipr.views.notify' id=ipr.id type="update" %}"
                   title="Notify the submitter of IPR that is being updated">
                    Notify
                </a>
            {% endif %}
            {% if ipr.updates and ipr.state_id == 'pending' and ipr.update_notified_date or not ipr.updates and ipr.state_id == 'pending' %}
                <a class="btn btn-primary"
                   href="{% url 'ietf.ipr.views.post' id=ipr.id %}">
                    <i class="bi bi-check" aria-hidden="true"></i> Post
                </a>
            {% endif %}
            <a class="btn btn-primary"
               href="{% url 'ietf.ipr.views.email' id=ipr.id %}"
               title="Email submitter of this disclsoure">
                <i class="bi bi-envelope" aria-hidden="true"></i> Email
            </a>
            <a class="btn btn-primary"
               href="{% url 'ietf.ipr.views.edit' id=ipr.id %}">Edit</a>
            <a class="btn btn-primary"
               href="{% url 'ietf.ipr.views.state' id=ipr.id %}">Change State</a>
        {% endif %}
    </div>
    {% if not ipr.compliant %}
        {% if in_force_ipr_rfc == 'RFC 8179' %}
            <p class="alert alert-danger my-3">
                This IPR disclosure does not comply with the formal requirements of Section 5,
                "IPR Disclosures," of
                <a href="https://www.rfc-editor.org/rfc/rfc8179.txt">RFC 8179</a>,
                "Intellectual Property Rights in IETF Technology."
            </p>
        {% else %}
            <p class="alert alert-danger my-3">
                This IPR disclosure does not comply with the formal requirements of Section 6,
                "IPR Disclosures," of
                <a href="https://www.rfc-editor.org/rfc/rfc3979.txt">RFC 3979</a>,
                "Intellectual Property Rights in IETF Technology."
            </p>
        {% endif %}
    {% endif %}
    {% if ipr.has_legacy_event %}
        <p>
            The text of the original IPR disclosure is available in the
            <a href="{% url "ietf.ipr.views.history" id=ipr.id %}">disclosure history</a>.
        </p>
    {% endif %}
    <div>
        <strong>Submitted:</strong>
        {{ ipr.time|date:"F j, Y" }} under the rules in {{ in_force_ipr_rfc }}
    </div>
    {% if user|has_role:"Secretariat" %}
        <div>
            <strong>State:</strong>
            {{ ipr.state }}
        </div>
    {% endif %}
    {% if ipr.state_id == 'posted' %}
        <p class="alert alert-info my-3">
            Note: Updates to IPR disclosures must only be made by authorized
            representatives of the original submitters. Updates will automatically
            be forwarded to the current Patent Holder's Contact and to the Submitter
            of the original IPR disclosure.
        </p>
    {% endif %}
    {% if updates_iprs or updated_by_iprs %}
        <h2 class="mt-4">Updates</h2>
        {% if updated_by_iprs %}
            <dl class="row">
                <dt class="col-sm-1">
                    Updated by
                </dt>
                <dd class="col-sm-11">
                    {% for item in updated_by_iprs %}
                        <div>
                            IPR Disclosure ID #{{ item.source.id }},
                            {% if item.source.state.slug == "removed" %}
                                "{{ item.source.title }}" (which was removed at the request of the submitter)
                            {% else %}
                                "<a href="{% url "ietf.ipr.views.show" id=item.source.id %}">{{ item.source.title }}</a>"
                            {% endif %}
                        </div>
                    {% endfor %}
                </dd>
            </dl>
        {% endif %}
        {% if updates_iprs %}
            <dl class="row">
                <dt class="col-sm-1">
                    Updates
                </dt>
                <dd class="col-sm-11">
                    {% for item in updates_iprs %}
                        <div>
                            IPR Disclosure ID #{{ item.target.id }},
                            {% if item.target.state.slug == "removed" %}
                                "{{ item.target.title }}" (which was removed at the request of the submitter)
                            {% elif item.target.state.slug == "rejected" %}
                                "{{ item.target.title }}" (which was rejected)
                            {% elif item.target.state.slug == "parked" %}
                                "{{ item.target.title }}"
                            {% else %}
                                "<a href="{% url "ietf.ipr.views.show" id=item.target.id %}">{{ item.target.title }}</a>"
                            {% endif %}
                        </div>
                    {% endfor %}
                </dd>
            </dl>
        {% endif %}
    {% endif %}
    {% if user|has_role:"Secretariat" and ipr.update_notified_date %}
        <div class="alert alert-info my-3">
            This update was notified to the submitter of the IPR that is being updated on: {{ ipr.update_notified_date|date:"Y-m-d" }}
        </div>
    {% endif %}
    <h2 class="mt-4">
        {% cycle 'I' 'II' 'III' 'IV' 'V' 'VI' 'VII' 'VIII' as section %}.
        {% if ipr|to_class_name == "ThirdPartyIprDisclosure" %}Possible{% endif %}
        Patent Holder/Applicant ("Patent Holder")
    </h2>
    <table class="table table-sm table-striped">
        {% if prev %}
            <thead>
                <tr class="text-center">
                    <th class="ipr-prev col-5">
                        {% if prev.state.slug == "posted" %}
                            Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                        {% else %}
                            Previous (#{{ prev.id }}, {{ prev.state }})
                        {% endif %}
                    </th>
                    <th></th>
                    <th class="col-5">This (#{{ ipr.id }})</th>
                </tr>
            </thead>
        {% endif %}
        <tbody>
            <tr>
                <td class="ipr-prev">
                    {% if prev %}{{ prev.holder_legal_name }}{% endif %}
                </td>
                <th class="ipr-label text-center">Holder legal name</th>
                <td class="ipr-this">{{ ipr.holder_legal_name }}</td>
            </tr>
        </tbody>
    </table>
    {% if ipr.holder_contact_name or ipr.holder_contact_info %}
        <h2 class="mt-4">{% cycle section %}. Patent Holder's Contact for License Application</h2>
        <table class="table table-sm table-striped">
            {% if prev %}
                <thead>
                    <tr class="text-center">
                        <th class="ipr-prev col-5">
                            {% if prev.state.slug == "posted" %}
                                Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                            {% else %}
                                Previous (#{{ prev.id }}, {{ prev.state }})
                            {% endif %}
                        </th>
                        <th></th>
                        <th class="col-5">This (#{{ ipr.id }})</th>
                    </tr>
                </thead>
            {% endif %}
            <tbody>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.holder_contact_name }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">Holder contact name</th>
                    <td class="ipr-this">
                        {{ ipr.holder_contact_name }}
                    </td>
                </tr>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.holder_contact_email }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Holder contact email
                    </th>
                    <td class="ipr-this">
                        {{ ipr.holder_contact_email }}
                    </td>
                </tr>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.holder_contact_info|linebreaks }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Holder contact info
                    </th>
                    <td class="ipr-this">
                        {% if ipr.holder_contact_info %}
                            {{ ipr.holder_contact_info|linebreaks }}
                        {% endif %}
                    </td>
                </tr>
            </tbody>
        </table>
    {% endif %}
    {% if ipr.ietfer_name or ipr.ietfer_contact_email or ipr.ietfer_contact_info %}
        <h2 class="mt-4">
            {% cycle section %}. Contact Information for the IETF Participant Whose Personal Belief Triggered this Disclosure
        </h2>
        <table class="table table-sm table-striped">
            {% if prev %}
                <thead>
                    <tr class="text-center">
                        <th class="ipr-prev col-5">
                            {% if prev.state.slug == "posted" %}
                                Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                            {% else %}
                                Previous (#{{ prev.id }}, {{ prev.state }})
                            {% endif %}
                        </th>
                        <th>
                        </th>
                        <th class="col-5">
                            This (#{{ ipr.id }})
                        </th>
                    </tr>
                </thead>
            {% endif %}
            <tbody>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.ietfer_name }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Name
                    </th>
                    <td class="ipr-this">
                        {{ ipr.ietfer_name }}
                    </td>
                </tr>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.ietfer_contact_email }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Email
                    </th>
                    <td class="ipr-this">
                        {{ ipr.ietfer_contact_email }}
                    </td>
                </tr>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.ietfer_contact_info|linebreaks }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Other info
                    </th>
                    <td class="ipr-this">
                        {{ ipr.ietfer_contact_info|linebreaks }}
                    </td>
                </tr>
            </tbody>
        </table>
    {% endif %}
    {% if ipr.iprdocrel_set.all or ipr.other_designations %}
        <h2 class="mt-4">
            {% cycle section %}. IETF Document or Other Contribution to Which this IPR Disclosure Relates
        </h2>
        <table class="table table-sm table-striped">
            {% if prev %}
                <thead>
                    <tr class="text-center">
                        <th class="ipr-prev col-5">
                            {% if prev.state.slug == "posted" %}
                                Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                            {% else %}
                                Previous (#{{ prev.id }}, {{ prev.state }})
                            {% endif %}
                        </th>
                        <th>
                        </th>
                        <th class="col-5">
                            This (#{{ ipr.id }})
                        </th>
                    </tr>
                </thead>
            {% endif %}
            <tbody>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}
                            {% for iprdocrel in prev.iprdocrel_set.all %}
                                <b>{{ iprdocrel.doc_type }}:</b>
                                {{ iprdocrel.formatted_name }} ("{{ iprdocrel.document.document.title }}")
                                {% if iprdocrel.revisions %}
                                    <div>
                                        Revisions: {{ iprdocrel.revisions }}
                                    </div>
                                {% endif %}
                                {% if iprdocrel.sections %}
                                    <div>
                                        Sections: {{ iprdocrel.sections }}
                                    </div>
                                {% endif %}
                            {% endfor %}
                            {% if prev.other_designations %}
                                <b>Designations for Other Contributions</b>
                                {{ prev.other_designations }}
                            {% endif %}
                        {% endif %}
                    </td>
                    <th class="ipr-label text-center">
                    </th>
                    <td class="ipr-this">
                        {% for iprdocrel in ipr.iprdocrel_set.all %}
                            <b>{{ iprdocrel.doc_type }}:</b>
                            {{ iprdocrel.formatted_name }} ("{{ iprdocrel.document.document.title }}")
                            {% if iprdocrel.revisions %}
                                <div>
                                    Revisions: {{ iprdocrel.revisions }}
                                </div>
                            {% endif %}
                            {% if iprdocrel.sections %}
                                <div>
                                    Sections: {{ iprdocrel.sections }}
                                </div>
                            {% endif %}
                        {% endfor %}
                        {% if ipr.other_designations %}
                            <dl>
                                <dt>
                                    Designations for Other Contributions
                                </dt>
                                <dd>
                                    {{ ipr.other_designations }}
                                </dd>
                            </dl>
                        {% endif %}
                    </td>
                </tr>
            </tbody>
        </table>
    {% endif %}
    {% if ipr.patent_info or ipr.has_patent_pending %}
        <h2 class="mt-4">
            {% cycle section %}. Disclosure of Patent Information
            <br>
            <small class="text-muted">i.e., patents or patent applications required to be disclosed by {{ in_force_ipr_rfc }}</small>
        </h2>
        <p>
            A. For granted patents or published pending patent applications, please provide the following information:
        </p>
        <table class="table table-sm table-striped">
            {% if prev %}
                <thead>
                    <tr class="text-center">
                        <th class="ipr-prev col-5">
                            {% if prev.state.slug == "posted" %}
                                Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                            {% else %}
                                Previous (#{{ prev.id }}, {{ prev.state }})
                            {% endif %}
                        </th>
                        <th>
                        </th>
                        <th class="col-5">
                            This (#{{ ipr.id }})
                        </th>
                    </tr>
                </thead>
            {% endif %}
            <tbody>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.patent_info|linebreaks }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Patent, Serial,
                        Publication, Registration,
                        or Application/File number(s)
                    </th>
                    <td class="ipr-this">
                        {{ ipr.patent_info|linebreaks }}
                    </td>
                </tr>
            </tbody>
        </table>
        <p>
            B. Does this disclosure relate to an unpublished pending patent application?:
        </p>
        <table class="table table-sm table-striped">
            {% if prev %}
                <thead>
                    <tr class="text-center">
                        <th class="ipr-prev col-5">
                            {% if prev.state.slug == "posted" %}
                                Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                            {% else %}
                                Previous (#{{ prev.id }}, {{ prev.state }})
                            {% endif %}
                        </th>
                        <th>
                        </th>
                        <th class="col-5">
                            This (#{{ ipr.id }})
                        </th>
                    </tr>
                </thead>
            {% endif %}
            <tbody>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.has_patent_pending|yesno:"Yes,No" }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Has patent pending
                    </th>
                    <td class="ipr-this">
                        {{ ipr.has_patent_pending|yesno:"Yes,No" }}
                    </td>
                </tr>
            </tbody>
        </table>
    {% endif %}
    {% if ipr.licensing %}
        <h2 class="mt-4">
            {% cycle section %}. Licensing Declaration
        </h2>
        <p>
            The Patent Holder states that its position with respect
            to licensing any patent claims contained in the patent(s) or patent
            application(s) disclosed above that would necessarily be infringed by
            implementation of the technology required by the relevant IETF specification
            ("Necessary Patent Claims"), for the purpose of implementing such
            specification, is as follows(select one licensing declaration option only):
        </p>
        {% if prev.licensing.slug == "provided-later" or ipr.licensing.slug == "provided-later" %}
            <div>
                Possible licensing choices a), b), and c) when Licensing Declaration to be Provided Later:
                <ul style="list-style: none">
                    {% for desc in choices_abc %}
                        <li>
                            {{ desc }}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
        <table class="table table-sm table-striped">
            {% if prev %}
                <thead>
                    <tr class="text-center">
                        <th class="ipr-prev col-5">
                            {% if prev.state.slug == "posted" %}
                                Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                            {% else %}
                                Previous (#{{ prev.id }}, {{ prev.state }})
                            {% endif %}
                        </th>
                        <th>
                        </th>
                        <th class="col-5">
                            This (#{{ ipr.id }})
                        </th>
                    </tr>
                </thead>
            {% endif %}
            <tbody>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}
                            {% if prev.licensing.slug == "provided-later" %}
                                {{ prev.licensing.desc|slice:"2:"|slice:":117" }})
                            {% else %}
                                {{ prev.licensing.desc|slice:"2:" }}
                            {% endif %}
                        {% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Licensing
                    </th>
                    <td class="ipr-this">
                        {% if ipr.licensing.slug == "provided-later" %}
                            {{ ipr.licensing.desc|slice:"2:"|slice:":117" }})
                        {% else %}
                            {{ ipr.licensing.desc|slice:"2:" }}
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.licensing_comments|default:"(No information submitted)"|linebreaks }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Licensing information, comments, notes, or URL for further information
                    </th>
                    <td class="ipr-this">
                        {{ ipr.licensing_comments|default:"(No information submitted)"|linebreaks }}
                    </td>
                </tr>
            </tbody>
        </table>
        <p>
            Note: The individual submitting this template represents and warrants
            that he or she is authorized by the Patent Holder to agree to the
            above-selected licensing declaration.
        </p>
    {% elif ipr.statement %}
        <h2 class="mt-4">
            {% cycle section %}. Statement
        </h2>
        <table class="table table-sm table-striped">
            {% if prev %}
                <thead>
                    <tr class="text-center">
                        <th class="ipr-prev col-5">
                            {% if prev.state.slug == "posted" %}
                                Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                            {% else %}
                                Previous (#{{ prev.id }}, {{ prev.state }})
                            {% endif %}
                        </th>
                        <th>
                        </th>
                        <th class="col-5">
                            This (#{{ ipr.id }})
                        </th>
                    </tr>
                </thead>
            {% endif %}
            <tbody>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.statement|linebreaks }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Statement
                    </th>
                    <td class="ipr-this">
                        {{ ipr.statement|linebreaks }}
                    </td>
                </tr>
            </tbody>
        </table>
    {% endif %}
    <h2 class="mt-4">
        {% cycle section %}. Contact Information of Submitter of this Form
    </h2>
    <table class="table table-sm table-striped">
        {% if prev %}
            <thead>
                <tr class="text-center">
                    <th class="ipr-prev col-5">
                        {% if prev.state.slug == "posted" %}
                            Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                        {% else %}
                            Previous (#{{ prev.id }}, {{ prev.state }})
                        {% endif %}
                    </th>
                    <th>
                    </th>
                    <th class="col-5">
                        This (#{{ ipr.id }})
                    </th>
                </tr>
            </thead>
        {% endif %}
        <tbody>
            <tr>
                <td class="ipr-prev">
                    {% if prev %}{{ prev.submitter_name }}{% endif %}
                </td>
                <th class="ipr-label text-center">
                    Submitter name
                </th>
                <td class="ipr-this">
                    {{ ipr.submitter_name }}
                </td>
            </tr>
            <tr>
                <td class="ipr-prev">
                    {% if prev %}{{ prev.submitter_email }}{% endif %}
                </td>
                <th class="ipr-label text-center">
                    Submitter email
                </th>
                <td class="ipr-this">
                    {{ ipr.submitter_email }}
                </td>
            </tr>
        </tbody>
    </table>
    {% if ipr.notes %}
        <h2 class="mt-4">
            {% cycle section %}. Other Notes
        </h2>
        <table class="table table-sm table-striped">
            {% if prev %}
                <thead>
                    <tr class="text-center">
                        <th class="ipr-prev col-5">
                            {% if prev.state.slug == "posted" %}
                                Previous (<a href="{% url "ietf.ipr.views.show" id=prev.id %}">#{{ prev.id }}</a>)
                            {% else %}
                                Previous (#{{ prev.id }}, {{ prev.state }})
                            {% endif %}
                        </th>
                        <th>
                        </th>
                        <th class="col-5">
                            This (#{{ ipr.id }})
                        </th>
                    </tr>
                </thead>
            {% endif %}
            <tbody>
                <tr>
                    <td class="ipr-prev">
                        {% if prev %}{{ prev.notes|linebreaks }}{% endif %}
                    </td>
                    <th class="ipr-label text-center">
                        Additional notes
                    </th>
                    <td class="ipr-this">
                        {{ ipr.notes|linebreaks }}
                    </td>
                </tr>
            </tbody>
        </table>
    {% endif %}
    <p class="my-3 alert alert-info">
        Only those sections of the relevant entry form where the submitter provided information are displayed above.
    </p>
{% endblock %}