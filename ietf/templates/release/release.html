{# bs5ok #}
{# Copyright The IETF Trust 2015, All Rights Reserved #}
{% extends "base.html" %}
{% load origin textfilters ietf_filters %}
{% load cache %}
{% block title %}Release information{% endblock %}
{% block content %}
    {% origin %}
    <div class="row">
        <h1 class="col-11">
            <a class="text-reset text-decoration-none"
               href="https://trac.ietf.org/trac/ietfdb/browser/tags/{{ entry.version }}">
                Version {{ entry.version }}
            </a>
            <br>
            <small class="text-muted">Released {{ entry.date }}</small>
        </h1>
        <div class="col-1 text-end">
            <a href="{% url "ietf.release.views.stats" %}" class="icon-link">
                <i class="bi bi-bar-chart-line"></i>
            </a>
        </div>
    </div>
    <ul class="pagination d-flex py-2">
        <li class="me-auto page-item {% if not entry.prev %}disabled{% endif %}">
            <a class="page-link"
               href="{% if entry.prev %}/release/{{ entry.prev.version }}/{% else %}#{% endif %}">
                <i class="bi bi-arrow-left"></i> Previous release
            </a>
        </li>
        <li class="page-item {% if not entry.next %}disabled{% endif %}">
            <a class="page-link"
               href="{% if entry.next %}/release/{{ entry.next.version }}/{% else %}#{% endif %}">
                Next release <i class="bi bi-arrow-right"></i>
            </a>
        </li>
    </ul>
    <p>
        {% if coverage %}
            Tested:
            <b>Code</b>: {{ coverage.code.percentage|stringformat:".2f" }}%,
            <b>Templates</b>: {{ coverage.template.percentage|stringformat:".2f" }}%,
            <b>URLs</b>: {{ coverage.url.percentage|stringformat:".2f" }}%
        {% endif %}
        {% if code_coverage_url %}
            (A
            <a href="{{ code_coverage_url }}">code test coverage report</a>
            dated {{ code_coverage_time }} is available.)
        {% endif %}
    </p>
    <h2 class="mt-3">{{ entry.version }} release notes</h2>
    {% if entry.title %}<h3 class="mt-3">{{ entry.title }}</h3>{% endif %}
    <pre>{{ entry.html|linkify|urlize_ietf_docs }}</pre>
    <div class="text-muted mt-1 ms-3">&mdash; {{ entry.author }} &lt;{{ entry.email|linkify }}&gt;  {{ entry.date }}</div>
    {% cache 3600 ietf_release_list %}
    <div id="release-list"></div>
    <h2 class="mt-3">Release list</h2>
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th>Version</th>
                <th>Release date</th>
                <th>Feature summary</th>
            </tr>
        </thead>
        <tbody>
            {% for item in releases %}
                {% ifchanged %}
                    <tr class="table-info">
                        <th></th>
                        <th class="text-end">{{ item.date|slice:"7:11" }}</th>
                        <th></th>
                    </tr>
                {% endifchanged %}
                <tr>
                    <td class="text-end">
                        <a href="/release/{{ item.version }}/">{{ item.version }}</a>
                    </td>
                    <td class="text-end">{{ item.date|slice:":11" }}</td>
                    <td>{{ item.title|linkify|urlize_ietf_docs }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endcache %}
{% endblock %}
{% block footer %}
    <p class="text-center">
        <a href="https://trac.ietf.org/trac/ietfdb/wiki/ContractorInstructions">Contractor instructions</a>
    </p>
    {{ block.super }}
{% endblock %}